<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
	<meta charset="utf-8" />
	<title>登录---雷铭站群内容管理系统</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<!-- BEGIN GLOBAL MANDATORY STYLES -->
	<link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
	<link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>
	<link href="media/css/style.css" rel="stylesheet" type="text/css"/>
	<link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<!-- END GLOBAL MANDATORY STYLES -->
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link href="media/css/login-soft.css" rel="stylesheet" type="text/css"/>
	<!-- END PAGE LEVEL STYLES -->
	<link rel="shortcut icon" href="media/image/favicon.ico" />
	<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(function() { 
			if($(".page-header-fixed").length>0){
				location.href="loginAction.do?login";
				return;
			}
			$(".logo").show();
			$(".content").show();
			$(".copyright").show();
		}); 
	</script>
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="login">
	<!-- BEGIN LOGO -->
	<div class="logo" style="color:#fff;font-size: 20px;font-weight: bold;width:321px;display: none;">
		雷铭站群内容管理系统-LMCMS
	</div>
	<!-- END LOGO -->
	<!-- BEGIN LOGIN -->
	<div class="content"style="display: none;">
		<!-- BEGIN LOGIN FORM -->
		<form  name="form1" class="form-vertical login-form" method="post" action="loginAction.do?login">
			<h3 class="form-title">系统登录</h3>
			<div class="alert alert-error hide">
				<button class="close" data-dismiss="alert"></button>
				<span>输入您的用户名和密码</span>
			</div>
			<div class="control-group">
				<!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
				<label class="control-label visible-ie8 visible-ie9">用户名</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-user"></i>
						<input class="m-wrap placeholder-no-fix" type="text" placeholder="用户名" id="userName" name="name" value=""/>
					</div>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label visible-ie8 visible-ie9">密码</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-lock"></i>
						<input class="m-wrap placeholder-no-fix" type="password" placeholder="密码" id="password" name="cryptogram" value=""/>
					</div>
				</div>
			</div>
			<!-- 登录添加验证码 -->
			<div class="control-group">
				<label class="control-label visible-ie8 visible-ie9">验证码</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-lock"></i>

						<input class="m-wrap placeholder-no-fix" style="width:160px;" onfocus="change()" type="text" placeholder="验证码" id="randCode" name="randCode"/>
						<div style="float: right;">
                            <img id="randCodeImage" title="点击换一张" src="randCodeImage" onclick="change()"/>

                        </div>
					</div>
				</div>
			</div>
			<div class="form-actions" style="padding-bottom: 0px;">
				<!--
				<label class="checkbox pull-left">
				<input type="checkbox" name="remember" value="1"/> 记住用户

				</label>
				-->
				<button type="button" id="loginOn" class="btn blue" style="width: 100%;" onclick="check()">
				登录 <i class="m-icon-swapright m-icon-white"></i>
				</button>            
			</div>
			<span id="point"></span>
			<!-- <div class="forget-password">
				<h4>忘记密码 ?</h4>
				<p>
					不用担心, 点击 <a href="javascript:;" style="color:#035ae6;" id="forget-password">这里</a> 重置密码.
				</p>
			</div>
			<div class="create-account">
				<p>
					还没有账户 ?&nbsp; 
					<a href="javascript:;" id="register-btn" style="color:#035ae6;" >创建账户</a>
				</p>
			</div> -->
		</form>
		<!-- END LOGIN FORM -->        
		<!-- BEGIN FORGOT PASSWORD FORM -->
		<form class="form-vertical forget-form" action="loginController.do?reset">
			<h3 class="">忘记密码 ?</h3>
			<p>输入您的邮箱地址进行密码重置</p>
			<div class="control-group">
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-envelope"></i>
						<input class="m-wrap placeholder-no-fix" type="text" placeholder="Email" name="email" />
					</div>
				</div>
			</div>
			<div class="form-actions">
				<button type="button" id="back-btn" class="btn">
				<i class="m-icon-swapleft"></i> 返回
				</button>
				<button type="submit" class="btn blue pull-right">
				提交 <i class="m-icon-swapright m-icon-white"></i>
				</button>            
			</div>
		</form>
		<!-- END FORGOT PASSWORD FORM -->
		<!-- BEGIN REGISTRATION FORM -->
		<form class="form-vertical register-form" action="loginController.do?registe">
			<h3 class="">注册</h3>
			<p>输入账户信息:</p>
			<div class="control-group">
				<label class="control-label visible-ie8 visible-ie9">用户名</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-user"></i>
						<input class="m-wrap placeholder-no-fix" type="text" placeholder="用户名" name="username"/>
					</div>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label visible-ie8 visible-ie9">密码</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-lock"></i>
						<input class="m-wrap placeholder-no-fix" type="password" id="register_password" placeholder="密码" name="password"/>
					</div>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label visible-ie8 visible-ie9">再次输入密码</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-ok"></i>
						<input class="m-wrap placeholder-no-fix" type="password" placeholder="再次输入密码" name="rpassword"/>
					</div>
				</div>
			</div>
			<div class="control-group">
				<!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
				<label class="control-label visible-ie8 visible-ie9">Email</label>
				<div class="controls">
					<div class="input-icon left">
						<i class="icon-envelope"></i>
						<input class="m-wrap placeholder-no-fix" type="text" placeholder="Email" name="email"/>
					</div>
				</div>
			</div>
			<div class="control-group">
				<div class="controls">
					<label class="checkbox">
					<input type="checkbox" name="tnc"/> 我同意 <a href="#" style="color:#035ae6;" >服务条款</a> 和 <a href="#" style="color:#035ae6;">隐私约定</a>
					</label>  
					<div id="register_tnc_error"></div>
				</div>
			</div>
			<div class="form-actions">
				<button id="register-back-btn" type="button" class="btn">
				<i class="m-icon-swapleft"></i>  返回
				</button>
				<button class="btn blue pull-right">
				注册 <i class="m-icon-swapright m-icon-white"></i>
				</button>            
			</div>
		</form>
		<!-- END REGISTRATION FORM -->
	</div>
	<!-- END LOGIN -->
	<!-- BEGIN COPYRIGHT -->
	<div class="copyright" style="width:360px;display: none;">
		Copyright &copy; 2011-2015  <a href="http://www.leimingtech.com" style="color:#035ae6;" target="_target">北京雷铭智信科技有限公司</a>　版权所有 . Email:marketing@leimingtech.com
	</div>
	<!-- END COPYRIGHT -->
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->
	<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      
	<script src="media/js/bootstrap.min.js" type="text/javascript"></script>
	<!--[if lt IE 9]>
	<script src="media/js/excanvas.min.js"></script>
	<script src="media/js/respond.min.js"></script>  
	<![endif]-->   
	<script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>  
	<script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>
	<script src="media/js/jquery.uniform.min.js" type="text/javascript" ></script>
	<!-- END CORE PLUGINS -->
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script src="media/js/jquery.validate.min.js" type="text/javascript"></script>
	<script src="media/js/jquery.backstretch.min.js" type="text/javascript"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="media/js/app.js" type="text/javascript"></script>
	<script src="media/js/login-soft.js" type="text/javascript"></script>      
	<!-- END PAGE LEVEL SCRIPTS --> 
	
	<!-- login out time begin -->
	<script type="text/javascript" src="js/jquery.cookies.2.2.0.js"></script>
	
	<script>
		
		jQuery(document).ready(function() {
		  App.init();
		  Login.init();
		});
		function getUrlParam(name) {
	        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
	        var r = window.location.search.substr(1).match(reg);  //匹配目标参数
	        if (r != null) return unescape(r[2]); return null; //返回参数值
	    }
		$('#userName').focus();
		function check(){
			var urlStr = 'loginAction.do?checkuser';
			var userName = $('#userName').val();
			var password = $('#password').val();
			var randCode = $('#randCode').val();
			$("#loginOn").attr("disabled","disabled");
			$.ajax({
				type:'post',
				url:urlStr,
				data:{'userName':userName,'password':password,'randCode':randCode},
				dataType:'text',
				success:function(msg){
					var obj = JSON.parse(eval(msg));
					if(obj.isSuccess){
						if($.cookies.test()){
							$.cookies.set("loginTimer",1);
						}
						var netCatchManage=getUrlParam("netCatchManage");
						if(netCatchManage){
							document.getElementById("randCodeImage").src="randCodeImage?"+Math.random();
						}
						else{
							location.href="loginAction.do?login";
						}
					}else{
						document.getElementById("point").innerHTML = 
							"<img src='media/image/action_stop.gif'><span style='margin-left:10px;color:#990033'>"+obj.msg+"</span>";
							//验证码错误刷新
							document.getElementById("randCodeImage").src="randCodeImage?"+Math.random();
					}
				},
				error:function(){
					alert("load page error, page url is " + lefUrl);
				},
				complete:function (){
					$("#loginOn").removeAttr("disabled","disabled");
				}
			});
		}
	</script>
	<script type="text/javascript" language=JavaScript charset="UTF-8">
	      document.onkeydown=function(event){
	            var e = event || window.event || arguments.callee.caller.arguments[0];
	            if(e && e.keyCode==27){ // 按 Esc 
	                //要做的事情
	              }
	            if(e && e.keyCode==113){ // 按 F2 
	                 //要做的事情
	               }            
	             if(e && e.keyCode==13){ // enter 键
	                 //要做的事情
	                $("form:visible button[type='submit']").click();
	             	check();
	            }
	        }; 
	        $(function (){
	        	changewindow();
	        	$("#userName,#password").on("change",function (){
	        		$("#point").html("");
	        	});
	        });
	        function changewindow(){
	        	var height = $(window).height();
	        	var contentHeight=$(".login .content").height();
	        	var loginHeight=contentHeight+50+50;
        		var margintop=$(".login .logo").css("marginTop");
	        	if(height>loginHeight){
	        		$(".login .logo").stop().animate({'marginTop': (height-loginHeight)/2-17}, "slow");
	        	}else{
	        		$(".login .logo").stop().animate({'marginTop': 0}, "slow");
	        	}
	        }
	        $(window).resize(function (){
	        	setTimeout("changewindow()",500);
	        });
	</script>
	<!-- 实现换一张的效果 -->
	<script>
		function change(){
			document.getElementById("randCodeImage").src="randCodeImage?"+Math.random();
			}
	</script>
	</script>
	<!-- END JAVASCRIPTS -->
<!-- END BODY -->
</html>